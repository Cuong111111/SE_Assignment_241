<header class="header">
  <div class="logo-container">
    <img
      src="../../../assets/images/logo.png"
      alt="HCMUT SPSS Logo"
      class="logo"
    />
    <span class="logo-text">HCMUT SPSS</span>
  </div>
  <div class="user-info">
    <span class="user-name">{{ user?.name }}</span>
    <button class="login-btn" (click)="logout()">Đăng xuất</button>
  </div>
</header>

<!-- Page Balance -->
<div class="function-container">
  <div class="page-balance">
    <h3>Số dư trang</h3>
    <p>{{ pageBalance }}</p>
    <div class="progress-bar">
      <div
        class="progress"
        [style.width]="(pageBalance / 200) * 100 + '%'"
      ></div>
    </div>
    <button class="btn-black" (click)="onBuyMore()">Mua thêm</button>
  </div>

  <!-- Quick Print -->
  <div class="quick-print">
    <h3>In nhanh</h3>
    <button class="btn-black" (click)="onUploadDocument()">
      <img
        src="../../../assets/images/upload_icon1.png"
        alt="Upload"
        class="upload-icon"
      />
      Tải tài liệu
    </button>
  </div>
</div>
<!-- Recent Files -->
<div class="recent-files">
  <div class="tabs">
    <button class="active">In gần đây</button>
    <button (click)="navigateToHistory()">Lịch sử in</button>
  </div>
  <div class="files-list">
    <div class="file" *ngFor="let file of printHistory" (click)="showFileDetails(file)">
      <span>📄 {{ file.title }}</span>
    </div>
    
    <!-- Modal hiển thị chi tiết file -->
    <div class="file-details-modal" *ngIf="selectedFile">
      <div class="modal-content">
        <h3>Chi tiết file</h3>
        <p><strong>Tiêu đề:</strong> {{ selectedFile.title }}</p>
        <p><strong>Định dạng:</strong> {{ selectedFile.fileFormats }}</p>
        <p><strong>Ngày in:</strong> {{ selectedFile.printDate | date:'dd/MM/yyyy HH:mm:ss' }}</p>
        <p><strong>Số trang đã in:</strong> {{ selectedFile.pagesPrinted }}</p>
        <p><strong>Printer ID:</strong> {{ selectedFile.printerId }}</p>
        <button (click)="closeFileDetails()" class="btn-close">Đóng</button>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  <p>© 2024 HCMUT Student Smart Printing Service. All rights reserved.</p>
</footer>
